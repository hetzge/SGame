package de.hetzge.sgame.entity;

import de.hetzge.sgame.common.IF_Module;
import de.hetzge.sgame.entity.message.NewEntityMessage;
import de.hetzge.sgame.entity.message.NewEntityMessageHandler;
import de.hetzge.sgame.entity.message.RemoveEntityMessage;
import de.hetzge.sgame.entity.message.RemoveEntityMessageHandler;
import de.hetzge.sgame.entity.message.SyncAllEntitiesMessage;
import de.hetzge.sgame.entity.message.SyncAllEntitiesMessageHandler;
import de.hetzge.sgame.message.CallbackMessage;
import de.hetzge.sgame.message.MessageConfig;

public class EntityModule implements IF_Module {

	@Override
	public void init() {
		MessageConfig.INSTANCE.messageHandlerPool.registerMessageHandler(NewEntityMessage.class, new NewEntityMessageHandler());
		MessageConfig.INSTANCE.messageHandlerPool.registerMessageHandler(RemoveEntityMessage.class, new RemoveEntityMessageHandler());
		MessageConfig.INSTANCE.messageHandlerPool.registerMessageHandler(SyncAllEntitiesMessage.class, new SyncAllEntitiesMessageHandler());

		MessageConfig.INSTANCE.serverToNewClientBatch.messages.add(new CallbackMessage(() -> {
			return new Object();
		}));

		EntityConfig.INSTANCE.entityPool.init();
	}

	@Override
	public void update() {
		EntityConfig.INSTANCE.entityPool.update();
	}

}
