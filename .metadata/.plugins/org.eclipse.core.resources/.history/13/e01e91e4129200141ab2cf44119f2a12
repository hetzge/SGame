package de.hetzge.sgame.network;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;

import org.nustaq.net.TCPObjectSocket;

import de.hetzge.sgame.common.CommonConfig;
import de.hetzge.sgame.common.serializer.Serializer;

public class Connection {

	private final TCPObjectSocket tcpObjectSocket;

	public Connection(Socket socket) throws IOException {
		this.tcpObjectSocket = new TCPObjectSocket(socket, CommonConfig.INSTANCE.fst);
	}

	public Object read() throws Exception  {
		return tcpObjectSocket.readObject();
	}
	
//	public Object read() throws IOException, ClassNotFoundException {
//		int length = this.dataInputStream.readInt();
//		byte[] byteArray = new byte[length];
//		this.dataInputStream.read(byteArray);
//		return Serializer.deserialize(byteArray);
//	}
//
//	public void write(Object message) throws IOException {
//		byte[] serialized = Serializer.serialize(message);
//		this.dataOutputStream.writeInt(serialized.length);
//		this.dataOutputStream.write(serialized);
//		this.dataOutputStream.flush();
//	}

}
